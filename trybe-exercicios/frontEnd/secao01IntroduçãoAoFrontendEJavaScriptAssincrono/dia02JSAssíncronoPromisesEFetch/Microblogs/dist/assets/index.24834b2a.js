(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=e(t);fetch(t.href,n)}})();function d(o){const s=document.querySelector("#users-select");o.map(e=>{const r=document.createElement("option");r.setAttribute("value",e.id),r.innerText=e.firstName,s.appendChild(r)})}function m(o){if(o.length===0)return;const s=document.querySelector("#posts-section"),e=document.querySelector("#featured-post-title"),r=document.querySelector("#featured-post-body"),t=document.querySelector("#related-posts-section");s.classList.remove("invisible");const n=[...o],c=n.pop();if(e.innerText=c.title,r.innerText=c.body,n.length===0)return;const i=document.createElement("h2");i.innerText="Related posts",t.appendChild(i),n.map(u=>{const l=document.createElement("p");l.innerText=u.title,t.appendChild(l)})}function a(o){if(o.length===0)return;const s=document.querySelector("#featured-post-comments"),e=document.createElement("h3");e.innerText="Comments",s.appendChild(e),o.map(r=>{const t=document.createElement("p");t.innerText=r.body,s.appendChild(t)})}function f(o){const s=document.querySelector("#error-message");s.classList.remove("invisible"),s.innerText=o}function p(){const o=document.querySelector("#posts-section"),s=document.querySelector("#featured-post-title"),e=document.querySelector("#featured-post-body"),r=document.querySelector("#related-posts-section"),t=document.querySelector("#featured-post-comments"),n=document.querySelector("#error-message");s.innerHTML="",e.innerHTML="",r.innerHTML="",t.innerHTML="",n.innerHTML="",o.classList.add("invisible"),n.classList.add("invisible")}const y=document.querySelector("#users-select"),h="https://dummyjson.com/users";fetch(h).then(o=>o.json()).then(o=>d(o.users)).catch(o=>console.log(o));y.addEventListener("change",o=>{p();const s=o.target.value;fetch(`https://dummyjson.com/posts/user/${s}`).then(e=>e.json()).then(e=>{m(e.posts);const r=e.posts[e.posts.length-1];return fetch(`https://dummyjson.com/posts/${r.id}/comments`)}).then(e=>e.json()).then(e=>a(e.comments)).catch(e=>f(e))});
